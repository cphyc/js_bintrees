RBTreeByIndex=function(n){var k=function(h){h=k.m[h];if(h.mod)return h.mod.exports;var m=h.mod={exports:{}};h(m,m.exports);return m.exports};k.m={};k.m["./treebase"]=function(h,k){function e(){}function f(a){this._tree=a;this._ancestors=[];this._cursor=null}e.prototype.clear=function(){this._root=null;this.size=0};e.prototype.find=function(a){for(var b=this._root;null!==b;){var c=this._comparator(a,b.data);if(0===c)return b.data;b=b.get_child(0<c)}return null};e.prototype.findIter=function(a){for(var b=
this._root,c=this.iterator();null!==b;){var d=this._comparator(a,b.data);if(0===d)return c._cursor=b,c;c._ancestors.push(b);b=b.get_child(0<d)}return null};e.prototype.lowerBound=function(a){for(var b=this._root,c=this.iterator(),d=this._comparator;null!==b;){var l=d(a,b.data);if(0===l)return c._cursor=b,c;c._ancestors.push(b);b=b.get_child(0<l)}for(l=c._ancestors.length-1;0<=l;--l)if(b=c._ancestors[l],0>d(a,b.data))return c._cursor=b,c._ancestors.length=l,c;c._ancestors.length=0;return c};e.prototype.upperBound=
function(a){for(var b=this.lowerBound(a),c=this._comparator;0===c(b.data(),a);)b.next();return b};e.prototype.min=function(){var a=this._root;if(null===a)return null;for(;null!==a.left;)a=a.left;return a.data};e.prototype.max=function(){var a=this._root;if(null===a)return null;for(;null!==a.right;)a=a.right;return a.data};e.prototype.iterator=function(){return new f(this)};e.prototype.eachNode=function(a){for(var b=this.iterator(),c;null!==(c=b.next());)a(c)};e.prototype.each=function(a){this.eachNode(function(b){a(b.data)})};
e.prototype.mapNode=function(a){for(var b=this.iterator(),c,d=[];null!==(c=b.next());)d.push(a(c));return d};e.prototype.map=function(a){return this.mapNode(function(b){return a(b.data)})};f.prototype.data=function(){return null!==this._cursor?this._cursor.data:null};f.prototype.next=function(){if(null===this._cursor){var a=this._tree._root;null!==a&&this._minNode(a)}else if(null===this._cursor.right){do if(a=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=
null;break}while(this._cursor.right===a)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor:null};f.prototype.prev=function(){if(null===this._cursor){var a=this._tree._root;null!==a&&this._maxNode(a)}else if(null===this._cursor.left){do if(a=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===a)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);
return null!==this._cursor?this._cursor:null};f.prototype._minNode=function(a){for(;null!==a.left;)this._ancestors.push(a),a=a.left;this._cursor=a};f.prototype._maxNode=function(a){for(;null!==a.right;)this._ancestors.push(a),a=a.right;this._cursor=a};h.exports=e};k.m.__main__=function(h,m){function e(b){this._root=null;this.size=0;this._nil=new f("nil");this._nil.red=!1;this._nil.weight=0}function f(b){this.data=b;this.parent=this.right=this.left=null;this.red=!0;this.weight=1}var a=k("./treebase");
e.prototype=new a;e.prototype.insert=function(b,c){this.size+=1;var d=new f(c),a=this._root;if(!a)return this._root=d,this._root.red=!1,!0;for(;;)if(a.weight===b){a=a.max_tree(function(b){b.weight+=1});a.set_child("right",d);d.parent=a;break}else if(left=a.get_child("left"),right=a.get_child("right"),left||0!==b)if(left&&left.weight>=b)a.weight+=1,a=left;else if(right)b-=(left?left.weight:0)+1,a.weight+=1,a=right;else{a.weight+=1;a.set_child("right",d);d.parent=a;break}else{a.weight+=1;a.set_child("left",
d);d.parent=a;break}this.insert_correction(d);return!0};e.prototype.rotate=function(b,c){var a;a=c.get_child(b,!0);c.set_child(b,a.get_child(b),!0);a.get_child(b)&&(a.get_child(b).parent=c);(a.parent=c.parent)?c===c.parent.get_child(b)?c.parent.set_child(b,a):c.parent.set_child(b,a,!0):this._root=a;a.set_child(b,c);c.parent=a;c.weight=(c.left?c.left.weight:0)+(c.right?c.right.weight:0)+1;a.weight=(a.left?a.left.weight:0)+(a.right?a.right.weight:0)+1};e.prototype.insert_correction=function(b){function c(c){var e;
(e=b.parent.parent.get_child(c,!0))&&e.red?(b.parent.red=!1,e.red=!1,b.parent.parent.red=!0,b=b.parent.parent):(b===b.parent.get_child(c,!0)&&(b=b.parent,a.rotate(c,b)),b.parent.red=!1,b.parent.parent.red=!0,a.rotate("left"===c?"right":"left",b.parent.parent))}for(var a=this;b.parent&&b.parent.red;)b.parent===b.parent.parent.get_child("left")?c("left"):b.parent===b.parent.parent.get_child("right")&&c("right");this._root.red=!1};e.prototype.find=function(){var b=this.findNode.apply(this,arguments);
return b?b.data:null};e.prototype.findNode=function(b,c){if(b>=this.size)return null;var a=this._root;if(!a)return null;for(;0<b||0===b&&a.left;)if(left=a.left,right=a.right,left&&left.weight>b)c&&c(a),a=left;else if(!left&&0===b||left&&left.weight===b)break;else if(right)c&&c(a),a=right,b-=(left?left.weight:0)+1;else throw Error("this should not happen");return a};e.prototype.remove=function(b){var c,a,e;b=this.findNode(b,function(b){b.weight--});--this.size;c=b.left&&b.right?b.next(function(b){--b.weight}):
b;a=c.left?c.left:c.right;e=c.parent;a&&(a.parent=c.parent);c.parent?c===c.parent.left?c.parent.left=a:c.parent.right=a:this._root=a;c!==b&&(b.data=c.data,b.weight=(b.left?b.left.weight:0)+(b.right?b.right.weight:0)+1);c.red||this.remove_correction(a,e);return c};e.prototype.remove_correction=function(b,c){for(var a=this,e,f=function(f){var g=c.get_child(f,!0);g&&g.red&&(g.red=!1,c.red=!0,a.rotate(f,c),g=c.get_child(f,!0));g.left&&g.left.red||g.right&&g.right.red?(g.get_child(f,!0)&&g.get_child(f,
!0).red||(g.get_child(f)&&(g.get_child(f).red=!1),g.red=!0,e="left"===f?"right":"left",a.rotate(e,g),g=c.get_child(f,!0)),g.red=c?c.red:fals,c.red=!1,g.get_child(f,!0)&&(g.get_child(f,!0).red=!1),a.rotate(f,c),b=a._root):(g.red=!0,b=c);c=b.parent};!(b===this._root||b&&b.red);)b===c.get_child("left")?tmp=f("left"):b===c.get_child("right")&&(tmp=f("right"));b&&(b.red=!1)};f.prototype.get_child=function(b,a){a&&(b="left"===b?"right":"left");return"left"===b?this.left:this.right};f.prototype.set_child=
function(b,a,d){d&&(b="left"===b?"right":"left");"left"===b?this.left=a:this.right=a};f.prototype.max_tree=function(b){var a=this;for(b&&b(a);a.right;)a=a.right,b&&b(a);return a};f.prototype.min_tree=function(b){var a=this;for(b&&b(a);a.left;)a=a.left,b&&b(a);return a};f.prototype.next=function(b){var a,d;if(this.get_child("right"))return this.get_child("right").min_tree(b);b&&b(this);a=this;for(d=this.parent;d&&a===d.get_child("right");)a=d,d=a.parent,b&&b(d);return d};f.prototype.prev=function(b){var a,
d;if(this.get_child("left"))return this.get_child("left").max_tree(b);b&&b(this);a=this;for(d=this.parent;d&&a===d.get_child("left");)a=d,d=a.parent,b&&b(d);return d};f.prototype.depth=function(){for(var b=0,a=this;a;)b+=1,a=a.parent;return b};h.exports=e};return k("__main__")}(window);
